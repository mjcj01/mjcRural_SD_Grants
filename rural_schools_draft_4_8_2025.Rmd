---
title: "Federal Funds and Rural Schools"
author: "Michael Cattell, Scott Levengood"
header-includes:
    - \usepackage{setspace}\doublespacing
    - \usepackage{booktabs}
output:
  pdf_document: default
  word_document: default
fontsize: 12pt
bibliography: export-data.bib
csl: apa.csl
nocite: '@*'
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(extrafont)
#font_import()
loadfonts(device = "win")
source("Scripts//data_load.R", local = knitr::knit_global())
```

# Introduction

Rural schools face unique challenges. They exist distant from major economic centers, have high poverty rates, and have less infrastructure, like broadband internet, roads, or government services. Part of the effect these factors have on rural residents is the quality of their and their kids' education.

Grants and other programs from the federal government have the potential to act as an equalizer between districts situated in different contexts. This study investigates whether federal grants and programs harness this potential and actually serve as an equalizer. It will also aim to understand these through the lens of racial,

# Literature Review

Policymakers have a social responsibility to create education systems that ensure equal and
equitable opportunities. Decades of disinvestment and institutional inequities have led to persistent
funding disparities for school districts serving low-income, nonwhite, and rural students. Rural school districts are tasked with overcoming systemic deficiencies in infrastructure, access to government services, and high poverty rates. This literature review will analyze three main areas of rural education research and policy: redefining rurality, demography and the role of community in rural school districts, and the equity of federal education policies affecting rural school districts.

## Defining Rurality

There is a lack of attention paid to rural education from policymakers and scholars. Ignoring this population has resulted in inequal and inequitable material conditions for rural school districts and their communities. Kai Schafft, a rural sociologist of education (2016), argues that rural Americans, their schools, and public school students exist on the periphery of scholars’ and policymakers’ attention, despite representing a significant proportion of the population. The author claims that education policy programs, like the Rural Low Income School (RLIS) program and Small, Rural School Achievement (SRSA) programs exist as the result of rural school districts failing to meet policy goals and achievement guidelines established for all public schools, rather than a coherent policy vision specifically for rural schools. Moreover, Schafft points to the disparity in scholarly research and education specialization programs at top universities, noting that articles and programs are focused more on urban areas than on rural ones.

Existing literature supports the conclusion that rural school districts are underserved by policymakers and researchers (Hoggart 1990; Eppley 2009). The problem starts with how rural schools are being defined. Nelson and Ngyuen (2023) argue that the school classifications are too narrowly focused on population density and proximity distance to metropolitan areas, failing to consider the services and amenities available within a community. Using the term “rural” to dictate policy approaches to funding overlooks more important differences between these communities and urban school districts than just population size. Additionally, rurality is often viewed inherently as problematic in areas like community sustainability, well-being, and equity (Nelson and Ngyuen 2023). These authors propose policymakers and researchers redefine rurality to include community measures such as environmental, social, and economic resources.

## Demography and the Role of Community in Rural School Districts

Demographers have historically shown how education contributes to and causes out-migration for rural communities. Individuals who are relatively young and possess high levels of educational attainment and training are more likely to leave their communities than rural non-movers (Brown and Schafft 2011). There is overwhelming amount educational research showing the direct relationship between educational achievement, attainment, and socioeconomic status (Bodovski 2010; Sanders et al. 2023). Students who come from backgrounds of higher socioeconomic status are more likely to take AP courses, finish high school, and enroll in top universities. Schafft (2016) demonstrates this relationship in regard to out-migration in rural school districts by showing how students of low-income backgrounds were more likely to leave their communities. The author argues that rural school districts create a paradox by preparing high-achieving students equipped with resources to leave, while also simultaneously failing to serve the students that typically stay within these rural communities.

Education policy does currently exist that addresses this concern of out-migration in rural communities; the answer is community-based solutions. Rural schools can decrease out-migration by connecting students with their community through job shadow opportunities, apprenticeships, and school-to-work programs (Schafft & Harmon 2011) (Eppley 2009). Rural schools are often large employers in their communities. Grow-your-own policies aimed at recruiting and retaining local community residents for teaching and administrative positions has proven success. Boulden and Schimmel (2021) analyzed a university-district partnership aimed at connecting school counseling students with three rural elementary schools nearby. These students from West Virginia University were immersed in Kanawha County Schools and were held to the same standards as district employees. The school district retained one-third of the school counseling students as district employees following their graduation and enrollment rates in the university program increased the following year.

Rural schools are often associated with a strong sense of identity and serve as a place for civic engagement. Rural parents are more likely to volunteer and attend events at their kids’ schools (Schafft 2016). Place-based education that focuses on addressing local needs with academic discipline also connect students with their communities. This approach promotes sustainable community development
(Nelson and Nyguen (2023).

## Equity of Federal Education Policies

Title 1 funding is a federal education funding policy that aims to address inequal and inequitable outcomes on student achievement and attainment. This policy provides districts with resources to address education quality and inequity for low-income students. Title 1 funding distribution criteria consists of the overall number of students from a low-income background and the concentration of poverty. This criterion disproportionately benefits urban school districts with larger numbers of low-income students more closely concentrated geographically (Brenner 2016).

No Child Left Behind (NCLB) is another federal education policy that sought to close the achievement and attainment gap between students. NCLB included a provision that forced schools to recruit individuals that matched the federal government’s definition of a “highly qualified teacher”. Eppley (2009) argued that this provision is a reductionist, quantifiable conceptualization of quality. NCLB considers teachers highly qualified if they are certified, possess a bachelor’s degree, and demonstrate knowledge in the areas they teach. A Center of Education Policy study found that over one- third of state officials considered this provision to be ineffective at improving student achievement (Eppley 2009). Rural school districts often have the most difficulty with recruiting and retaining quality teachers and administrators, a problem backed by the concept of out-migration (Schafft 2016). Therefore, this policy imposed universally on all public schools was not considerate of problems persistent for rural school districts.

The Every Student Succeeds Act (ESSA) took effect in the fall of 2016 and replaced NCLB. This education policy sought to increase flexibility and allow states to determine how best to meet the needs of struggling districts. States were allowed to set the criteria for what constituted a “highly qualified teacher”. Annual testing and achievement reporting is a component consistent to NCLB and ESSA. Education policies requiring reporting and compliance paperwork place an unfair and disproportionate burden on rural school districts. When looking at the Elementary and Secondary Education Act, another federal education funding policy, Yettick (2014) found that rural districts consisting of lower staff numbers struggled to find time to complete compliance paperwork. These school districts also offered less professional development training that eases the administrative burden on school staff.

The Rural Education Achievement Program (REAP) began under NCLB and continued with ESSA. REAP provides states with federal funded grants which are then distributed to rural LEA’s. The Rural Education Achievement Program used “Urban-Centric” locale codes based on students’ geographic proximity to urbanized areas under ESSA. This reductionist approach to defining “rural” does not properly encompass characteristic differences that persist between urban and rural school districts.

The last federal education funding policy to be discussed in this literature is Obama’s Race to the Top (RTT). RTT was a $4.35 billion grant program that encouraged states to enter a “voluntary” competition for federal funding. As a result of the underfunding of education across the U.S., one can ask the question if this grant program was truly “voluntary”. Kolbe and Rice 2012). States applied for these grants by submitting reform plans to be scored quantifiably based on rubric by the U.S. Department of Education. States received points for prioritizing STEM, investing in “great teachers and leaders”, and improving standards and assessments, along with several other accountability factors. Competitive grant programs favor urban and suburban school districts that have greater resources for writing competitive grant applications than rural school districts (Brenner 2016).

# Data and Methods

## Data

Data for this study comes from the National Center for Education Statistics (NCES), which is the statistical arm for the U.S. Department of Education, the U.S. Census Bureau, and Civil Rights Data Collection.

NCES provides a wide range of data through their Common Core of Data (CCD). Data on school district enrollment by race and locale classification (i.e., whether a district is considered urban, suburban, a town, or rural). Sourcing locale classifications from NCES provides a standardized comparison with other states, though utilizing a different rurality classification system is certainly possible. The definitions NCES uses for defining locales is in the table below.

```{r nces_locale_defs, echo = FALSE, message = FALSE, warning = FALSE, fig.cap = "NCES Locale Definition."}
library(gt)

nces_locale_classifications %>%
  gt() %>%
  cols_align(align = "center") %>%
  cols_width(Criteria ~ px(300)) %>%
  tab_options(data_row.padding = px(10))
```

School district revenue data comes from the most recent NCES School District Finance Survey, which was for the 2021-2022 school year. This survey collects school finance data for school districts (or local education agencies, as NCES refers to them as) in all 50 states plus Washington D.C. Revenue and expenditure data is aggregated by category, such as Title I funding, nutrition programs, and gifted education.

Initially, school district finance data from the Pennsylvania Department of Education (PDE) was used. PDE publishes school district finance data annually, with revenue and expenditure aggregated into smaller categories than NCES does. In order to get a broader view of school districts' revenue, these codes were grouped together (e.g., categories related to nutritional education and lunch programs were aggregated together). PDE's data, however, proved to be unreliable. Upon analysis of nutrition funding, only a handful of school districts were listed as receiving federal funds, a finding that is certainly false. Upon analysis of the NCES School District Finance Survey, this finding was confirmed and the data source used for this study was switched from PDE's data to data from NCES.

Data from the U.S. Census Bureau on poverty estimates is also used. The Census publishes annual poverty estimates at the school district level as the Small Area Income and Poverty Estimates (SAIPE). This allows for analysis of federal funding through the lens of economic equity, as well as racial equity.

Lastly, IDEA enrollment data is provided from the 2021-2022 Civil Rights Data Collection (CRDC) survey, which is administered through the U.S. Department of Education's Office for Civil Rights. This is a universal survey--that is, all public schools respond-- done at the school level that is conducted every other school that collects data used to monitor civil rights enforcement. This includes data related to discipline, gifted education, course offerings, and special education.

## Methods

Funding categories from the NCES School District Finance Survey will be picked and coded as funding one of five categories:

-   career and technical education,
-   school meal programs,
-   special education programs,
-   teacher retention and training programs.

These categories were picked due to the clear overlap in language used in the Finance Survey between federal and state revenue. The lack of granularity within the Finance Survey is certainly a limitation of this study, though this is the best available data at the time of writing. While the PDE finance data provided more granular funding categories, the lack of actual data present in the files makes them unusable.

In order to evaluate how effective federal funding is at being an equalizer, an initial linear regression model will be run in order to test whether state and federal funding are correlated. For each funding category analyzed, regression models will be created analyzing whether a relationship exists between the funding category and the different demographic variable in rural schools.

# Who's Learning in Rural Schools?

This study considers, to varying degrees, three different aspects of a school district's demographics in relation to the kind of federal funding they receive: racial composition, students' family income distribution, and the composition of students enrolled in programs funded by the Individual with Disabilities Education Act (IDEA).

## Racial Composition

Rural (and town) school districts are more racially homogeneous than their urban and suburban counterparts. They enroll predominantly White students, while having low proportions of Black, Hispanic, and Asian students.

```{r tot_stu_demog, echo = FALSE, message = FALSE, warning = FALSE, fig.cap = "Student Enrollment Percentages Across Pennsylvania by Locale."}
library(gt)

pa_enrollment %>%
  select(leaid, race, enrollment) %>%
  merge(.,
        pa_directory %>%
          select(leaid, urban_centric_locale) %>% 
          mutate("locale" = ifelse(grepl("Rural", urban_centric_locale), "Rural",
                            ifelse(grepl("Town", urban_centric_locale), "Town",
                            ifelse(grepl("Suburb", urban_centric_locale), "Suburban",
                            ifelse(grepl("City", urban_centric_locale), "Urban", "check"))))) %>%
          select(-urban_centric_locale)) %>%
  filter(race != "Total" & race != "Unknown") %>%
  group_by(race, locale) %>%
  reframe("enrollment" = sum(enrollment),
          "n" = n()) %>%
  group_by(locale) %>%
  reframe("race" = race,
          "pct_enr" = (enrollment / sum(enrollment)) * 100) %>%
  rename(Locale = "locale") %>%
  pivot_wider(names_from = "race", values_from = "pct_enr") %>%
  mutate("Other Race" = `American Indian or Alaska Native` +
           `Native Hawaiian or other Pacific Islander` +
           `Two or more races`) %>%
  select(-`American Indian or Alaska Native`, 
         -`Native Hawaiian or other Pacific Islander`, 
         -`Two or more races`) %>%
  pivot_longer(cols = c(White, Black, Hispanic, Asian, `Other Race`)) %>%
  mutate(value = paste(round(value, digits = 2), "%", sep = "")) %>%
  pivot_wider(names_from = Locale, values_from = value) %>%
  rename(Race = "name") %>%
  gt() %>%
  cols_align(align = "center") %>%
  tab_header(title = "Enrollment % by Race by Locale") %>%
  tab_footnote(footnote = "Data from NCES Common Core of Data, 2021-22 School Year")
```

This is a trend that generally matches the communities these school districts are situated in (see Figure 1). Rural school districts also tend to have predominantly White populations reside in them and low percentages of other ethnoracial groups. There is also far less variation in how diverse these places are; while suburban and urban schools have a mix of schools predominantly enrolling one ethnoracial group and schools with diverse enrollment, no rural school has a White student enrollment percentage under 50%.

```{r enr_pop_xy_plot, echo = FALSE, message = FALSE, warning = FALSE, out.width = "100%", fig.align = "center", fig.cap = "Student enrollment % vs. community population %, broken down by locale classification and ethnoracial group. Data from NCES Common Core of Data, 2021-22 School Year."}
pa_enrollment %>%
  select(leaid, race, enrollment) %>%
  filter(race != "Total") %>%
  group_by(leaid) %>%
  reframe("race" = race,
          "stu_pct" = enrollment / sum(enrollment)) %>%
  filter(race %in% c("Hispanic", "White", "Black", "Asian")) %>%
  merge(., census_pop, by.x = c("leaid", "race"), by.y = c("GEOID", "variable")) %>%
  merge(.,
        pa_directory %>%
          select(leaid, urban_centric_locale) %>% 
          mutate("locale" = ifelse(grepl("Rural", urban_centric_locale), "Rural",
                                   ifelse(grepl("Town", urban_centric_locale), "Town",
                                   ifelse(grepl("Suburb", urban_centric_locale), "Suburban",
                                   ifelse(grepl("City", urban_centric_locale), "Urban", "check"))))),
        by = "leaid") %>%
  ggplot(aes(x = stu_pct, y = pop_pct, color = race)) +
  geom_point() +
  facet_wrap(vars(locale)) +
  geom_abline(slope = 1, color = "#000000") +
  theme_minimal() +
  scale_x_continuous(labels = scales::label_percent()) +
  scale_y_continuous(labels = scales::label_percent()) +
  scale_color_discrete(name = "Ethnoracial Group") +
  labs(x = "Student Enrollment %",
       y = "Community Population Percentage") +
  theme(text = element_text(family = "Tinos"))
```

Additionally, this is also a broad spatial pattern for rural school districts across the state (see Figure 2). Only two districts have a non-White ethnoracial group make up more than 25% of their student population; 29% of students enrolled in both Pocono Mountain and Upper Adams School Districts are Hispanic.

## Economic Composition

Giving schools additional funding to assist with students in poverty has been a core part of the federal Elementary and Secondary Education Act (ESEA) and its subsequent re-authorizations since it passed in the 1960s. This issue is still pressing several decades after the initial passage of the ESEA due to widening income gap between students' families in schools (Reardon, 2011) and the higher cost of educating students in poverty (Ladd, 2012).

```{r stu_poverty_table, echo = FALSE, message = FALSE, warning = FALSE}
library(gt)
poverty_data %>%
  select(LEAID, young_pop, young_pov_pop, young_pov_pct) %>%
  merge(.,
        pa_directory %>%
          select(leaid, urban_centric_locale) %>% 
          mutate("locale" = ifelse(grepl("Rural", urban_centric_locale), "Rural",
                            ifelse(grepl("Town", urban_centric_locale), "Town",
                            ifelse(grepl("Suburb", urban_centric_locale), "Suburban",
                            ifelse(grepl("City", urban_centric_locale), "Urban", "check"))))) %>%
          select(-urban_centric_locale),
        by.x = "LEAID", by.y = "leaid") %>%
  mutate(young_pov_pct = young_pov_pct * 100) %>%
  group_by(locale) %>%
  reframe("pov_pct" = paste(round(sum(young_pov_pop) / sum(young_pop) * 100, digits = 2), "%", sep = ""),
          "n" = n(),
          "Mean %" = paste(round(mean(young_pov_pct), digits = 2),"%",sep=""),
          "St. Dev." = round(sd(young_pov_pct), digits = 4)) %>%
  rename(Locale = "locale",
         `Est. % of Students in Poverty` = "pov_pct") %>%
  gt() %>%
  cols_align(align = "center") %>%
  tab_header("Estimated Students in Poverty",
             "Estimates aggregated to locales and averages in each district by locale") %>%
  tab_footnote(footnote = "Data from the U.S. Census Bureau's Small Area Income and Poverty Estimates (SAIPE).")
```

Though many rural areas are impoverished (Monk, 2007), data from the U.S. Census Bureau shows that rural school districts have poverty rates more than half that of urban areas. Poverty rates between rural and suburban areas, on the other hand, are similar. The distribution of poverty rates, however, looks different between locale classifications. Rural school districts have a much narrower distribution (standard deviation of 4.62%) than urban school districts (SD of 9.36%) and suburban school districts (SD of 7.64%).

```{r pov_dens_plot, echo = FALSE, message = FALSE, warning = FALSE, fig.cap="Data from U.S. Census Bureau's Small Area Income and Poverty Estimates (SAIPE)."}
poverty_data %>%
  select(LEAID, young_pov_pct) %>%
  merge(.,
        pa_directory %>%
          select(leaid, urban_centric_locale) %>% 
          mutate("locale" = ifelse(grepl("Rural", urban_centric_locale), "Rural",
                            ifelse(grepl("Town", urban_centric_locale), "Town",
                            ifelse(grepl("Suburb", urban_centric_locale), "Suburban",
                            ifelse(grepl("City", urban_centric_locale), "Urban", "check"))))) %>%
          select(-urban_centric_locale),
        by.x = "LEAID", by.y = "leaid") %>%
  ggplot(aes(x = young_pov_pct, fill = locale)) +
  geom_density(alpha = 0.25) +
  labs(title = "Distribution of Poverty Rates in School Districts, by Locale",
       x = "% of Students in Poverty") +
  scale_fill_discrete(name = "Locale") +
  scale_x_continuous(labels = scales::percent) +
  theme_minimal() +
  theme(axis.text.y = element_blank(),
        axis.title.y = element_blank(),
        text = element_text(family = "Tinos"),
        panel.grid.major.y = element_blank(),
        panel.grid.minor.y = element_blank(),
        panel.grid.minor.x = element_blank())
```

Considering the economic characteristics of rural schools (and all schools, really), as students living in poverty require more resources to lift them to their potential (Ladd, 2012). School meal programs, after-school programming, and academic support programs all require additional funds to operate at their full potential. With this in mind, it would be expected that school districts with a higher poverty rate among its students would receive additional funding in certain funding categories than districts with a lower rate, either because of an explicit piece of the funding allocation formula that accounts for poverty (such as Title I funding) or because schools with a higher poverty rate have higher demand for certain programs (such as school meal programs).

## IDEA Composition

The third and final demographic this study will analyze in part is IDEA enrollment. IDEA enrollment is used over broader special education enrollment because IDEA funding to school districts is explicitly listed in the NCES School District Finance Survey, whereas Section 504 funding and other special education funding sources are not specifically outlined.

```{r idea_enr_locale_table, echo = FALSE, message = FALSE, warning = FALSE}
crdc_spled_enr %>%
  pivot_longer(cols = c(Total, Hispanic, Asian, White, Black),
               names_to = "race", values_to = "IDEA_enr") %>%
  group_by(LEAID, race) %>%
  reframe("IDEA_enr" = sum(IDEA_enr)) %>%
  merge(.,
        pa_enrollment %>%
          filter(race %in% c("Total", "Hispanic", "Asian", "White", "Black")) %>%
          select(leaid, race, enrollment),
        by.x = c("LEAID", "race"), by.y = c("leaid", "race")) %>%
  merge(.,
        pa_directory %>%
          select(leaid, urban_centric_locale) %>% 
          mutate("locale" = ifelse(grepl("Rural", urban_centric_locale), "Rural",
                            ifelse(grepl("Town", urban_centric_locale), "Town",
                            ifelse(grepl("Suburb", urban_centric_locale), "Suburban",
                            ifelse(grepl("City", urban_centric_locale), "Urban", "check"))))) %>%
          select(-urban_centric_locale),
        by.x = "LEAID", by.y = "leaid") %>%
  group_by(race, locale) %>%
  reframe(IDEA_enr = sum(IDEA_enr),
          TOT_enr = sum(enrollment),
          IDEA_pct = paste(round(sum(IDEA_enr) / sum(enrollment) * 100, digits = 2), "%", sep = "")) %>%
  select(race, locale, IDEA_pct) %>%
  rename(Race = "race",
         Locale = "locale",
         `% Enrolled in IDEA` = "IDEA_pct") %>%
  pivot_wider(names_from = Locale,
              values_from = `% Enrolled in IDEA`) %>%
  mutate(Race = as.factor(Race)) %>%
  arrange(fct_relevel(Race, "Total")) %>%
  gt() %>%
  cols_align(align = "center") %>%
  tab_header("IDEA-Related Special Education Enrollment, by Race and Locale") %>%
  tab_footnote(footnote = "Data from the Civil Rights Data Collection, 2021-22 School Year.")
```

Rural school districts' IDEA enrollment patterns are not dissimilar from that of other locales. They are, nevertheless, troubling; Black and Hispanic students are enrolled in rural schools at disproportionately high rates. Despite making up 2.92% of enrolled students in rural school districts, Black students account for 22.19% of IDEA enrollment in those same schools; that is a staggering 7.6 times difference. Hispanic students make up 5.61% of enrolled students in rural schools, and yet make up 20.73% of students enrolled in IDEA in rural schools. Mis-classification of Black and Hispanic students into special education programs has long been a practice that internally segregates schools (i.e., the school-wide demographics are racially integrated, but within the school programming is still segregated) (Parker, 2024), as students in special education programs often end up in separate classrooms for special education-related classwork.

# Results

As a starting point for analysis, linear regression was tested to see the correlation between state funding in the five selected categories and federal funding in rural school districts. If federal funding were behaving as an equalizer, the expectation is there would be a negative relationship between federal and state funding in each category; as you can increase state funding in a category, federal funding would decrease.

Bilingual education was initially included in this analysis due to the clear overlap in funding language in the NCES School District Finance Survey, but was removed as no school district was reported as having received state funding for bilingual education programs despite its presence as a line item on the Finance Survey.

```{r initial_regression, echo = FALSE, message = FALSE, warning = FALSE}
library(gt)
initial_reg_table <- NULL
for (i in unique(fed_sta_comp$name)) {
  lm <- fed_sta_comp %>%
    filter(name == i & locale == "Rural") %>%
    lm(data = ., formula = fed_rev ~ sta_rev) %>%
    summary()
  
  anova <- fed_sta_comp %>%
  filter(name == i & locale == "Rural") %>%
  lm(data = ., formula = fed_rev ~ sta_rev) %>%
  anova()
  
  df <- tibble("Category" = c(i),
               "n" = length(lm$residuals),
               "Estimate" = round(lm$coefficients[2,1], digits = 3),
               "p Value" = round(lm$coefficients[2,4], digits = 3),
               "R^2 Value" = round(lm$r.squared, digits = 3))
  initial_reg_table <- rbind(initial_reg_table, df)
}
initial_reg_table %>%
  gt() %>%
  cols_align(align = "center") %>%
  cols_width(Category ~ px(200))
```

```{r initial_regression_plots, echo = FALSE, message = FALSE, warning = FALSE, fig.align = "center", out.width = "100%", fig.cap = "x vs. y plot of State and Federal funding in four different funding categories with a line of best fit overlayed. Data from the NCES School Finance Survey, 2021-22 School Year."}
fed_sta_comp %>%
  filter(LEAID %in% rural_school_directory$leaid) %>%
  ggplot(aes(x = sta_rev, y = fed_rev, color = name)) +
  geom_point() +
  geom_smooth(aes(group = name), method = "lm") +
  facet_wrap(vars(name), 
             scales = "free",
             labeller = labeller(name = label_wrap_gen(15)),
             ncol = 2) +
  labs(x = "State Revenue per Enrolled Student",
       y = "Federal Revenue per Enrolled Student") +
  scale_color_discrete(name = "Funding Category") +
  scale_x_continuous(labels = scales::dollar_format(prefix="$")) +
  scale_y_continuous(labels = scales::dollar_format(prefix="$")) +
  guides(color=guide_legend(override.aes=list(fill=NA),
                            ncol = 2, byrow = TRUE)) +
  theme_minimal() +
  theme(text = element_text(family = "Tinos"),
        legend.position = "none")
```

A few interesting observations stick out with this initial regression model and x \~ y plot. The first observation, and the one most applicable to the central hypothesis, is that no funding category has a negative relation. Special education gets the closest with an estimated coefficient of 0.

The second observation is that three of the four funding categories produced statistically significant results (p \< 0.05). The one funding category that did not produce a statistically significant result--special education--is curious and warrants further investigation later in this section.

Teacher training and retention programs did produce a statistically significant result with an R\^2 value of 0.0 and a circle cluster of points on the regression plot, indicating no real relationship between state and federal funding sources. This can be an issue for rural school districts, as they have historically had issues recruiting and retaining teachers in their districts (Monk, 2007; Williams et al., 2022). While rural school districts receive more revenue per student from teacher-related programs than town and suburban districts, they still generate about 12% less revenue per student than urban schools.

```{r teacher_locale_table, echo = FALSE, message = FALSE, warning = FALSE}
fed_sta_comp %>%
  mutate("fed_tot_rev" = fed_rev * enrollment,
         "sta_tot_rev" = sta_rev * enrollment) %>%
  select(LEAID, locale, name, fed_tot_rev, sta_tot_rev, enrollment) %>%
  filter(name == "Teacher Funding") %>%
  select(-name) %>%
  mutate(fed_tot_rev = ifelse(is.nan(fed_tot_rev), 0, fed_tot_rev),
         sta_tot_rev = ifelse(is.nan(sta_tot_rev), 0, sta_tot_rev)) %>%
  group_by(locale) %>%
  reframe("fed_rev" = sum(fed_tot_rev),
          "sta_rev" = sum(sta_tot_rev),
          "tot_rev" = sum(fed_tot_rev, sta_tot_rev),
          "enr" = sum(enrollment)) %>%
  mutate("tot_per_enr" = paste("$", round(tot_rev / enr, digits = 2), sep = ""),
         "fed_per_enr" = paste("$", round(fed_rev / enr, digits = 2), sep = ""),
         "sta_per_enr" = paste("$", round(sta_rev / enr, digits = 2), sep = "")) %>%
  select(locale, tot_per_enr, fed_per_enr, sta_per_enr) %>%
  rename(Locale = "locale",
         `Total Rev. / Enrolled` = "tot_per_enr",
         `Federal Rev. / Enrolled` = "fed_per_enr",
         `State Rev. / Enrolled` = "sta_per_enr") %>%
  gt() %>%
  cols_align(align = "center")
```

The final observation is that only one funding category--school meal funding--had 1.) a large effective size of 2.535, 2.) a moderate correlation strength (R\^2 value of 0.2), and 3.) a statistically significant result (p \< 0.05). This will be explored in more detail in a subsequent section.

Further analysis of results is broken into three parts:

-   Variations in federal nutrition and school meal funding,
-   IDEA funding,
-   Rural-specific funding programs.

These further analyses will be looked at through the racial and economic demographics of a school districts' student body.

## Nutrition Programs

School meal funding is somewhat unique among school funding categories; while most categories are heavily reliant on state revenue to provide funding, the vast majority of school meal funding comes from the federal government. This pattern holds true in Pennsylvania.

As stated above, school meal funding is correlated relatively strongly between state and federal funding, with more funding coming from federal revenue than state; for every \$1 a state contributes at a rural school, the federal governments contributes around \$2.54.

### Race and Nutrition Funding

To analyze racial composition and nutrition funding, a model was assembled that correlated federal meal revenue with enrollment percentages for four ethnoracial groups: Asian, Black, Hispanic, and White students. The results of this model can be seen below.

```{r nutrition_race_reg, echo = FALSE, message = FALSE, warning = FALSE}
# nutrition_race_reg <- fed_rev %>%
#   #filter(locale == "Rural") %>%
#   filter(name == "School Meal Programs") %>%
#   merge(.,
#         pa_enrollment %>%
#           filter(race %in% c("White", "Black", "Hispanic", "Asian")) %>%
#           select(leaid, race, enrollment),
#         by.x = "LEAID", by.y = "leaid") %>%
#   merge(.,
#         pa_enrollment %>%
#           filter(race %in% c("Total")) %>%
#           select(leaid, enrollment) %>%
#           rename(tot_enr = "enrollment"),
#         by.x = "LEAID", by.y = "leaid") %>%
#   mutate(enr_pct = enrollment / tot_enr) %>%
#   select(-enrollment, -tot_enr) %>%
#   pivot_wider(names_from = c(race, locale), values_from = enr_pct) %>%
#   lm(data = ., formula = fed_rev ~ White + Black + Hispanic + Asian) %>% 
#   summary()

nutrition_race_reg <- NULL
for (i in c("Rural", "Town", "Suburban", "Urban")) {
  df <- fed_rev %>%
  filter(locale == i) %>%
  filter(name == "School Meal Programs") %>%
  merge(.,
        pa_enrollment %>%
          filter(race %in% c("White", "Black", "Hispanic", "Asian")) %>%
          select(leaid, race, enrollment),
        by.x = "LEAID", by.y = "leaid") %>%
  merge(.,
        pa_enrollment %>%
          filter(race %in% c("Total")) %>%
          select(leaid, enrollment) %>%
          rename(tot_enr = "enrollment"),
        by.x = "LEAID", by.y = "leaid") %>%
  mutate(enr_pct = enrollment / tot_enr) %>%
  select(-enrollment, -tot_enr) %>%
  pivot_wider(names_from = c(race), values_from = enr_pct) %>%
  lm(data = ., formula = fed_rev ~ White + Black + Hispanic + Asian) %>% 
  summary()
  
  df <- df$coefficients[2:5,] %>%
    as.data.frame() %>%
    mutate("Locale" = i) %>%
    rownames_to_column(., "Race")
  
  nutrition_race_reg <- rbind(nutrition_race_reg, df)
}

# nutrition_race_reg$coefficients[2:5,] %>%
#   as.data.frame() %>%
#   tibble::rownames_to_column(., "Race") %>%
#   gt()
```

There are a few notable takeaways from this model. The first is that all ethnoracial groups but Black students have a negative relationship; as one group's enrollment percentage goes up, federal funding for meals goes down to varying degrees depending on the ethnoracial group. Black students have a slightly positively correlated relationship with federal meal revenue. Notably, though, only the correlation between Asian students and federal meal revenue produces a statistically significant (p \< 0.05) result. While this is an interesting correlation, the R\^2 value is only 0.1159, indicating that while statistically significant, the relationship is not particularly strong. This pattern is likely more elaborately explained through the lens of poverty rates in schools.

### Poverty and Nutrition Funding

The purpose of federal nutrition assistance is to assist students whose families have difficulty affording lunches at school. The free and reduced meal program is a stable source of meals for many students. As a result, focusing on the poverty rate lens would likely show a clearer relationship between federal meal revenue and the poverty rate at a school, as opposed to between federal meal revenue and a school's ethnoracial enrollment percentages.

```{r nutrition_pov_reg, echo = FALSE, message = FALSE, warning = FALSE}
nutrition_pov_rev <- NULL

for (i in c("Rural", "Town", "Suburban", "Urban")) {
  df <- fed_rev %>%
    filter(locale == i & name == "School Meal Programs") %>%
    merge(., poverty_data, by = "LEAID") %>%
    mutate("young_pov_pct" = young_pov_pct*100) %>%
    rename(`Est. % of Students in Poverty` = "young_pov_pct") %>%
    lm(data = ., formula = fed_rev ~ sqrt(`Est. % of Students in Poverty`)) %>% summary()
  df <- df$coefficients %>%
    as.data.frame() %>%
    mutate("Locale" = i)
  nutrition_pov_rev <- rbind(nutrition_pov_rev, df)
}

nutrition_pov_rev %>%
  tibble::rownames_to_column(., "test") %>%
  filter(!grepl("Intercept", test)) %>%
  select(Locale, Estimate, `Std. Error`, `t value`, `Pr(>|t|)`) %>%
  gt()
```

```{r nutrition_pov_plot, echo = FALSE, message = FALSE, warning = FALSE}
fed_rev %>%
  filter(locale == "Rural" & name == "School Meal Programs") %>%
  merge(., poverty_data, by = "LEAID") %>%
  ggplot(aes(x = young_pov_pct, y = fed_rev)) +
  geom_point() +
  geom_smooth(method = "lm", formula = y ~ sqrt(x)) +
  labs(x = "Est. % of Students in Poverty",
       y = "Federal Meal Revenue per Enrolled Rural Student") +
  theme_minimal() +
  theme(text = element_text(family = "Tinos")) +
  scale_x_continuous(labels = scales::percent)
```

This expectation plays out in the data, with a clear square-root relationship between federal meal revenue and a school's estimated poverty rate. This also produces a statistically significant result (p \< 0.05) with an R\^2 correlation value of 0.2459, indicating a moderate correlation strength. This is a slightly stronger than applying an x vs. y relationship. This square-root based relationship does make sense given the incursion of base costs and then increasing required revenue as more students enroll in school meal programs; as more students enroll, the lower the required revenue per student becomes.

## IDEA Funding

The Individuals with Disabilities Education Act (IDEA) provides states with federal funding to distribute to school districts to assist with the cost of administering special education programs. 

### Race and IDEA Funding

As mentioned previously, Black and Hispanic students are disproportionately represented in special education programs. IDEA enrollment in rural Pennsylvania schools follow this pattern.

Despite the broader pattern of disproportionate enrollment, there is little evidence from the data showing a clear relationship between the racial demographics of IDEA enrollment in a school district and the amount of IDEA funding they receive. The only statistically significant (p < 0.05) relationship is between Hispanic enrollment and IDEA funding. The effect size is fairly small with a weak correlation, though; for every extra dollar per student in IDEA funding, a Hispanic enrollment increase of ~28% would have to occur.

```{r idea_race_reg, echo = FALSE, message = FALSE, warning = FALSE}
idea_race_reg <- crdc_spled_enr %>% 
  filter(LEAID %in% rural_school_directory$leaid) %>% 
  pivot_longer(cols = c(Hispanic, White, Black, Asian)) %>% 
  merge(., 
        pa_enrollment %>% 
          select(leaid, race, enrollment), 
        by.x = c("LEAID", "name"), by.y = c("leaid", "race")) %>% 
  group_by(name) %>% 
  reframe(LEAID = LEAID, "enr_pct" = value / enrollment * 100) %>%
  mutate(enr_pct = ifelse(is.nan(enr_pct), 0, enr_pct)) %>%
  merge(.,
        nces_rev %>%
          select(LEAID, V33, C15) %>%
          reframe(LEAID = LEAID,
                  idea_per_enr = C15 / V33),
        by = "LEAID") %>%
  pivot_wider(names_from = name, values_from = enr_pct) %>%
  mutate(Asian = ifelse(is.infinite(Asian), 0, Asian)) %>%
  lm(data = ., formula = idea_per_enr ~ Asian + Black + White + Hispanic) %>%
  summary()

idea_race_reg$coefficients[2:5,] %>%
  as.data.frame() %>%
  tibble::rownames_to_column(., "Race") %>%
  gt()
```

```{r idea_race_plot, echo = FALSE, message = FALSE, warning = FALSE}
crdc_spled_enr %>% 
  filter(LEAID %in% rural_school_directory$leaid) %>% 
  pivot_longer(cols = c(Hispanic, White, Black, Asian)) %>% 
  merge(., 
        pa_enrollment %>% 
          select(leaid, race, enrollment), 
        by.x = c("LEAID", "name"), by.y = c("leaid", "race")) %>% 
  group_by(name) %>% 
  reframe(LEAID = LEAID, "enr_pct" = value / enrollment * 100, enr = enrollment) %>%
  mutate(enr_pct = ifelse(is.nan(enr_pct), 0, enr_pct)) %>%
  merge(.,
        nces_rev %>%
          select(LEAID, V33, C15) %>%
          reframe(LEAID = LEAID,
                  idea_per_enr = C15 / V33),
        by = "LEAID") %>%
  ggplot(aes(x = enr_pct, y = idea_per_enr, color = name)) +
  geom_point() +
  facet_wrap(vars(name)) +
  geom_smooth(aes(group = name), method = "lm") +
  xlim(0, 100) +
  labs(x = "% of an Ethnoracial Group Enrolled in IDEA Programs",
       y = "IDEA Funding Per Enrolled Student") +
  theme_minimal() +
  theme(text = element_text(family = "Tinos")) +
  guides(color = guide_legend(override.aes = list(fill = NA))) +
  scale_color_discrete(name = "Ethnoracial Group")
```

### Poverty and IDEA Funding

Similar to race and IDEA funding, there is not a statistically significant relationship between poverty rates and IDEA funding. There is no clear relationship, statistically significant or otherwise, apparent at all.

```{r idea_pov_reg, echo = FALSE, message = FALSE, warning = FALSE}
idea_pov_reg <- crdc_spled_enr %>% 
  filter(LEAID %in% rural_school_directory$leaid) %>% 
  pivot_longer(cols = c(Hispanic, White, Black, Asian)) %>% 
  merge(., poverty_data, by = "LEAID") %>%
  merge(., fed_rev %>% rename(cat = "name"), by.x = "LEAID", by.y = "LEAID") %>%
  filter(cat == "Special Education") %>% 
  select(-name, -value) %>%
  unique() %>%
  lm(data = ., formula = fed_rev ~ young_pov_pct) %>% summary()
idea_pov_reg <- idea_pov_reg$coefficients %>%
  as.data.frame()
idea_pov_reg[2,] %>%
  tibble::rownames_to_column(., " ") %>%
  gt()
```

```{r idea_pov_plot, echo = FALSE, message = FALSE, warning = FALSE}
crdc_spled_enr %>% 
  filter(LEAID %in% rural_school_directory$leaid) %>% 
  pivot_longer(cols = c(Hispanic, White, Black, Asian)) %>% 
  merge(., poverty_data, by = "LEAID") %>%
  merge(., fed_rev %>% rename(cat = "name"), by.x = "LEAID", by.y = "LEAID") %>%
  filter(cat == "Special Education") %>% 
  select(-name, -value) %>%
  unique() %>%
  ggplot(aes(x = young_pov_pct, y = fed_rev)) +
  geom_point() +
  theme_minimal() +
  labs(x = "% of Students Enrolled in Poverty",
       y = "IDEA Revenue per Enrolled IDEA Student") +
  theme(text = element_text(family = "Tinos"))
```

## A Note on Title V - Part B Grants (Rural Specific Grants)

There are two federal grant programs that this study wanted to investigate, both under the Rural Education Achievement Program (REAP) under Title V, Part B of the ESEA: Small, Rural School Achievement (SRSA) and Rural and Low-Income School (RLIS). These programs help provide funding to rural schools that are small (< 600 average daily attendance) and/or have a high rate of poverty among its students (> 20% student poverty rate) respectively. Schools can be dual-eligible for these programs. Data on these programs is missing from the NCES School District Finance Survey, however. Only three school districts report funding from RLIS and none report funding from SRSA. This, unfortunately, makes it impossible to analyze the distribution of school districts' receiving REAP funds racial and economic composition.

Given available data, this would be a very beneficial source of funding to analyze given their non-competitive status; PDE (n.d.) states the purpose of these grants is "...to help rural districts that may lack the personnel and resources to compete effectively for Federal competitive grants and that often receive grant allocations in amounts that are too small to be effective in meeting their intended purposes." While RLIS does have an income requirement, SRSA does not. Additionally, neither have a racial component to their distribution. Thus, it would be interesting to investigate if schools with a higher (albeit, still low given rural schools are predominantly White) Black or Hispanic population receive more or less funding, and how much relative to other schools with different racial makeups.

# Discussion

The results from this study offer an interesting picture of how federal funding is employed in two different funding categories. With nutrition funding, federal funding serves as the primary funding sources that school districts rely on. As such, nutrition funding is an example of how the federal government expands their role from merely being an equalizer to being the primary meal revenue source for schools, allowing states and school districts to allocate funding to other programs that are in need of funding.

On the other hand, IDEA funding represents a way that the federal government does not behave as an equalizer. There was no significant relationship found between state and federal funding, when a negative relationship would be expected if the federal government were acting as an equalizing force. Additionally, no significant and strong relationship between a rural school district's racial or income demographics and IDEA funding. With this in mind, the federal government could be playing a more active role in doling out funding, much like it does for certain types of funding. 

## Importance to Civil Rights

A child's ability to learn in an inclusive and safe environment should be an "accident of geography"; that is, students should have access to a quality education they rightfully deserve regardless of where they are born and where they are living while going to school. Some funding categories have a more immediate tie to civil rights, such as IDEA funding. Students in need of learning accommodations have a right to a "free appropriate public education" under federal law. All federal funding ties to civil rights through the federal government's enforcement of civil rights protections for students and staff; disregard or unwillingness to comply with civil rights protections eventually leads to loss of federal funding.

\newpage

# References